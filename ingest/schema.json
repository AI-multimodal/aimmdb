{
  "bsonType" : "object",
  "required" : [
    "name",
    "leaf",
    "ancestors",
    "parent",
    "content"
  ],
  "properties" : {
    "leaf" : {
      "bsonType" : "bool"
    },
    "ancestors" : {
      "bsonType" : "array",
      "items" : {
        "bsonType" : "objectId"
      }
    },
    "parent" : {
      "bsonType" : ["objectId", "null"]
    },
    "content" : {
        "bsonType": ["object", "null"],
        "required": [
          "metadata",
          "data",
          "internal"
        ],
        "properties": {
          "metadata": {
            "bsonType": "object"
          },
          "data": {
            "bsonType": "object",
            "additionalProperties" : {
              "bsonType" : "object",
              "required": [
                "media_type",
                "structure_family"
              ],
              "anyOf": [
                {
                  "required": [
                    "blob"
                  ]
                },
                {
                  "required": [
                    "reference"
                  ]
                }
              ],
              "properties": {
                "media_type": {
                  "bsonType": "string"
                },
                "structure_family": {
                  "bsonType": "string",
                  "enum": [
                    "dataframe", "array"
                  ]
              }
            }
          }
        },
        "internal" : {
          "bsonType" : "object",
          "required" : [
            "tags",
            "sample_id",
            "type"
          ],
          "properties": {
            "tags": {
              "bsonType": ["array", "null"],
              "items" : {
                "bsonType" : "string"
              }
            },
            "sample_id": {
              "bsonType": "string"
            },
            "type" : {
              "bsonType" : "string",
              "enum" : [
                "xas", "rixs"
              ]
            }
          }
        }
      }
    }
  }
}
